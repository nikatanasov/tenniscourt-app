<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>–í—Å–∏—á–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏</title>
    <meta charset="UTF-8">
    <style>
        .product-card {
            border: 1px solid #ccc;
            border-radius: 12px;
            padding: 16px;
            margin: 10px;
            width: 280px;
            display: inline-block;
            vertical-align: top;
        }
    </style>
</head>
<body>
<h1 style="position: relative;">
    –í—Å–∏—á–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏
    <a th:href="@{/home}"
       style="position: absolute; right: 0; top: 0; padding: 10px 20px;
              background-color: #3498db; color: white; text-decoration: none;
              border-radius: 6px; font-weight: bold; font-size: 14px;">
        –ù–∞—á–∞–ª–æ
    </a>
</h1>

<div th:if="${products.size() == 0}">
    <p>–ù—è–º–∞ –Ω–∞–ª–∏—á–Ω–∏ –ø—Ä–æ–¥—É–∫—Ç–∏.</p>
</div>

<div th:each="product : ${products}" class="product-card">
    <h2 th:text="${product.name}">–ò–º–µ</h2>
    <p><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</strong> <span th:text="${product.quantity}">0</span></p>
    <p><strong>–¶–µ–Ω–∞:</strong> <span th:text="${product.price}">–û–ø–∏—Å–∞–Ω–∏–µ</span></p>
    <p><strong>–î–æ–±–∞–≤–µ–Ω –Ω–∞:</strong> <span th:text="${#temporals.format(product.addedOn, 'dd.MM.yyyy')}">–î–∞—Ç–∞</span></p>
    <p th:if = "${product.description != null}"><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> <span th:text="${product.description}">–û–ø–∏—Å–∞–Ω–∏–µ</span></p>
    <img th:if="${product.imageUrl}" th:src="${product.imageUrl}" alt="Image" width="150"/>

    <form th:action="@{'/products/cart/' + ${product.id}}" th:method="post">
        <button type="submit">–î–æ–±–∞–≤–∏ –ø—Ä–æ–¥—É–∫—Ç</button>
    </form>
</div>

<div class="cart-section">
    <h2>–ú–æ—è—Ç–∞ –∫–æ–ª–∏—á–∫–∞</h2>

    <div th:if="${items != null and !items.isEmpty()}">
        <ul>
            <li th:each="item : ${items}">
                <span th:text="${item.product.name}">–ò–º–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç</span>
                <span>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: <b th:text="${item.quantity}">1</b></span>
                <!-- üóëÔ∏è –ú–∞–ª—ä–∫ –±—É—Ç–æ–Ω -->
                <form th:action="@{'/products/cart/' + ${item.product.id}}" th:method="DELETE" style="display:inline;">
                    <input type="hidden" th:name="productId" th:value="${item.product.id}" />

                    <button type="submit"
                            style="background:none; border:none; color:red; font-size:0.9em; cursor:pointer;"
                            title="–ü—Ä–µ–º–∞—Ö–Ω–∏">
                        ‚ùå
                    </button>
                </form>
            </li>
        </ul>
    </div>

    <div th:if="${items == null or items.isEmpty()}">
        <p>–ö–æ–ª–∏—á–∫–∞—Ç–∞ –µ –ø—Ä–∞–∑–Ω–∞.</p>
    </div>

    <div th:if="${items != null and !items.isEmpty()}" style="margin-top: 20px;">
        <form th:action="@{/products/checkout}" th:method="POST">
            <button type="submit"
                    style="padding: 10px 20px; background-color: #28a745; color: white; border: none; cursor: pointer; font-size: 1.1em; border-radius: 5px;">
                –ü–ª–∞—Ç–∏ —Å–µ–≥–∞
            </button>
        </form>
    </div>
</div>

</body>
</html>